# Function to gather all internal endpoints from a website
function Get-WebsiteEndpoints {
    param (
        [string]$Website
    )

    if (-not $Website) {
        $Website = Read-Host "Enter website URL (including https://)"
    }

    Write-Host "Fetching internal links from: $Website"
    Write-Host "--------------------------------------------------"

    try {
        $response = Invoke-WebRequest -Uri $Website -UseBasicParsing -ErrorAction Stop
        $baseUri = [System.Uri]$Website

        # Extract internal links
        $links = $response.Links | Where-Object {
            $_.href -and
            ($_.href.StartsWith("/") -or $_.href.StartsWith("$($baseUri.Scheme)://$($baseUri.Host)"))
        } | Select-Object -ExpandProperty href -Unique

        Write-Host "`nDiscovered internal endpoints:"
        foreach ($link in $links) {
            if ($link.StartsWith("/")) {
                $fullLink = "$($baseUri.Scheme)://$($baseUri.Host)$link"
            } else {
                $fullLink = $link
            }
            Write-Host $fullLink
        }
    }
    catch {
        Write-Host "Error fetching $Website : $_" -ForegroundColor Red
    }
}

# Run the function
Get-WebsiteEndpoints

